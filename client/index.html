<!DOCTYPE html>
<html lang="en">
    <head>
        <title>TeaWater Game Client</title>
        <link media="screen" rel="stylesheet" href="/css/reset.css" />
        <link media="screen" rel="stylesheet" href="/css/main.css" />
    </head>
    <body>
        
        <div id="ViewPort"></div>
        
        <script type="text/javascript" src="/js/sha1.js"></script>
        <script type="text/javascript" src="/js/faye-browser-min.js"></script>
        <script type="text/javascript" src="/js/raphael-min.js"></script>
        <script type="text/javascript" src="/js/jquery-1.4.2.min.js"></script>
        <script type="text/javascript" src="/js/teawater-client.js"></script>
        <script type="text/javascript">
            
            $(function() {
                
                $.tw.connect();
                
                for(var i = 0; i < 10; i++) {
                    var row = $('<ul></ul>').appendTo('#ViewPort');
                    for(var j = 0; j < 10; j++) {
                        var col = $('<li></li>').appendTo(row).data(
                            'position',
                            {
                                x: j,
                                y: i
                            }
                        );
                    }
                }
                
                $('li').bind(
                    'click',
                    function(event) {
                        
                        var tile = $(event.currentTarget);
                        var x = tile.data('position').x;
                        var y = tile.data('position').y;
                        
                        // TODO: $.tw.putEntity(...);
                    }
                );
                
                $.tw.on(
                    'update',
                    function(errata) {
                        
                        // TODO: Update map based on errata
                    }
                );
            });
            
        </script>
    </body>
</html>